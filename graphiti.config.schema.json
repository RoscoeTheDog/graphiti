{
  "$defs": {
    "FilterConfig": {
      "description": "Configuration for session message filtering. Controls how different message types are filtered during session tracking.",
      "properties": {
        "tool_calls": {
          "default": true,
          "description": "Preserve tool call structure (names, parameters) even when filtering content",
          "title": "Tool Calls",
          "type": "boolean"
        },
        "tool_content": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ],
          "default": "default-tool-content.md",
          "description": "Content mode for tool results: true (no filtering), false (omit), \"template.md\" (template file), or \"inline prompt...\" (direct LLM prompt)",
          "title": "Tool Content"
        },
        "user_messages": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ],
          "default": true,
          "description": "Content mode for user messages: true (preserve), false (omit), \"template.md\" (template file), or \"inline prompt...\" (direct LLM prompt)",
          "title": "User Messages"
        },
        "agent_messages": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ],
          "default": true,
          "description": "Content mode for agent text responses: true (preserve), false (omit), \"template.md\" (template file), or \"inline prompt...\" (direct LLM prompt)",
          "title": "Agent Messages"
        }
      },
      "title": "FilterConfig",
      "type": "object"
    },
    "RetryQueueConfig": {
      "description": "Retry queue configuration for session tracking resilience. Configures the persistent queue used to retry failed session processing when the LLM becomes available again.",
      "properties": {
        "max_retries": {
          "default": 5,
          "description": "Maximum retry attempts per session",
          "title": "Max Retries",
          "type": "integer"
        },
        "retry_delays_seconds": {
          "default": [300, 900, 2700, 7200, 21600],
          "description": "Delay in seconds before each retry attempt. Default: 5m, 15m, 45m, 2h, 6h (progressive backoff)",
          "items": {
            "type": "integer"
          },
          "title": "Retry Delays Seconds",
          "type": "array"
        },
        "max_queue_size": {
          "default": 1000,
          "description": "Maximum number of sessions in retry queue",
          "title": "Max Queue Size",
          "type": "integer"
        },
        "persist_to_disk": {
          "default": true,
          "description": "Persist retry queue to disk for crash recovery",
          "title": "Persist To Disk",
          "type": "boolean"
        }
      },
      "title": "RetryQueueConfig",
      "type": "object"
    },
    "SessionNotificationsConfig": {
      "description": "Notification configuration for session tracking failures.",
      "properties": {
        "on_permanent_failure": {
          "default": true,
          "description": "Notify on permanent processing failure (after all retries exhausted)",
          "title": "On Permanent Failure",
          "type": "boolean"
        },
        "notification_method": {
          "default": "log",
          "description": "Method for sending failure notifications",
          "enum": [
            "log",
            "webhook",
            "both"
          ],
          "title": "Notification Method",
          "type": "string"
        },
        "webhook_url": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Webhook URL for failure notifications (if method includes webhook)",
          "title": "Webhook Url"
        }
      },
      "title": "SessionNotificationsConfig",
      "type": "object"
    },
    "SessionTrackingResilienceConfig": {
      "description": "Session tracking resilience configuration. Defines how session tracking handles LLM unavailability to ensure no session data is lost.",
      "properties": {
        "on_llm_unavailable": {
          "default": "STORE_RAW_AND_RETRY",
          "description": "Behavior when LLM is unavailable during session processing:\n- FAIL: Skip session (data loss risk)\n- STORE_RAW: Store raw session content without summarization\n- STORE_RAW_AND_RETRY: Store raw and queue for later processing (recommended)",
          "enum": [
            "FAIL",
            "STORE_RAW",
            "STORE_RAW_AND_RETRY"
          ],
          "title": "On Llm Unavailable",
          "type": "string"
        },
        "retry_queue": {
          "$ref": "#/$defs/RetryQueueConfig"
        },
        "notifications": {
          "$ref": "#/$defs/SessionNotificationsConfig"
        }
      },
      "title": "SessionTrackingResilienceConfig",
      "type": "object"
    },
    "SummarizationConfig": {
      "description": "Configuration for intelligent session summarization features. Controls how sessions are analyzed, categorized, and summarized for efficient cross-session retrieval.",
      "properties": {
        "template": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Custom summarization template path. If None, uses dynamic extraction.",
          "title": "Template"
        },
        "type_detection": {
          "default": "auto",
          "description": "Activity detection mode. 'auto' infers from messages, 'manual' requires explicit config.",
          "enum": [
            "auto",
            "manual"
          ],
          "title": "Type Detection",
          "type": "string"
        },
        "extraction_threshold": {
          "default": 0.3,
          "description": "Minimum priority score to include extraction field",
          "minimum": 0.0,
          "maximum": 1.0,
          "title": "Extraction Threshold",
          "type": "number"
        },
        "include_decisions": {
          "default": true,
          "description": "Extract key_decisions (prevents repeated debates)",
          "title": "Include Decisions",
          "type": "boolean"
        },
        "include_errors_resolved": {
          "default": true,
          "description": "Extract errors_resolved (debugging continuity)",
          "title": "Include Errors Resolved",
          "type": "boolean"
        },
        "tool_classification_cache": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Path to tool classification cache. Default: ~/.graphiti/tool_cache.json",
          "title": "Tool Classification Cache"
        }
      },
      "title": "SummarizationConfig",
      "type": "object"
    },
    "AnthropicProviderConfig": {
      "description": "Anthropic provider configuration",
      "properties": {
        "api_key_env": {
          "default": "ANTHROPIC_API_KEY",
          "title": "Api Key Env",
          "type": "string"
        },
        "base_url": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Base Url"
        }
      },
      "title": "AnthropicProviderConfig",
      "type": "object"
    },
    "AzureOpenAIProviderConfig": {
      "description": "Azure OpenAI provider configuration",
      "properties": {
        "endpoint_env": {
          "default": "AZURE_OPENAI_ENDPOINT",
          "title": "Endpoint Env",
          "type": "string"
        },
        "api_key_env": {
          "default": "AZURE_OPENAI_API_KEY",
          "title": "Api Key Env",
          "type": "string"
        },
        "api_version": {
          "default": "2025-01-01-preview",
          "title": "Api Version",
          "type": "string"
        },
        "deployment_name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Deployment Name"
        },
        "use_managed_identity": {
          "default": false,
          "title": "Use Managed Identity",
          "type": "boolean"
        }
      },
      "title": "AzureOpenAIProviderConfig",
      "type": "object"
    },
    "DatabaseConfig": {
      "description": "Database backend configuration",
      "properties": {
        "backend": {
          "default": "neo4j",
          "enum": [
            "neo4j",
            "falkordb"
          ],
          "title": "Backend",
          "type": "string"
        },
        "neo4j": {
          "$ref": "#/$defs/Neo4jConfig"
        },
        "falkordb": {
          "$ref": "#/$defs/FalkorDBConfig"
        }
      },
      "title": "DatabaseConfig",
      "type": "object"
    },
    "EmbedderAzureOpenAIConfig": {
      "description": "Azure OpenAI embedder configuration",
      "properties": {
        "endpoint_env": {
          "default": "AZURE_OPENAI_EMBEDDING_ENDPOINT",
          "title": "Endpoint Env",
          "type": "string"
        },
        "api_key_env": {
          "default": "AZURE_OPENAI_EMBEDDING_API_KEY",
          "title": "Api Key Env",
          "type": "string"
        },
        "api_version": {
          "default": "2023-05-15",
          "title": "Api Version",
          "type": "string"
        },
        "deployment_name": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Deployment Name"
        },
        "use_managed_identity": {
          "default": false,
          "title": "Use Managed Identity",
          "type": "boolean"
        }
      },
      "title": "EmbedderAzureOpenAIConfig",
      "type": "object"
    },
    "EmbedderConfig": {
      "description": "Embedder configuration",
      "properties": {
        "provider": {
          "default": "openai",
          "enum": [
            "openai",
            "azure_openai"
          ],
          "title": "Provider",
          "type": "string"
        },
        "model": {
          "default": "text-embedding-3-small",
          "title": "Model",
          "type": "string"
        },
        "dimensions": {
          "default": 1536,
          "title": "Dimensions",
          "type": "integer"
        },
        "batch_size": {
          "default": 100,
          "title": "Batch Size",
          "type": "integer"
        },
        "openai": {
          "$ref": "#/$defs/EmbedderOpenAIConfig"
        },
        "azure_openai": {
          "$ref": "#/$defs/EmbedderAzureOpenAIConfig"
        }
      },
      "title": "EmbedderConfig",
      "type": "object"
    },
    "EmbedderOpenAIConfig": {
      "description": "OpenAI embedder configuration",
      "properties": {
        "api_key_env": {
          "default": "OPENAI_API_KEY",
          "title": "Api Key Env",
          "type": "string"
        }
      },
      "title": "EmbedderOpenAIConfig",
      "type": "object"
    },
    "FalkorDBConfig": {
      "description": "FalkorDB database configuration",
      "properties": {
        "uri": {
          "default": "redis://localhost:6379",
          "title": "Uri",
          "type": "string"
        },
        "user": {
          "default": "default",
          "title": "User",
          "type": "string"
        },
        "password_env": {
          "default": "FALKORDB_PASSWORD",
          "title": "Password Env",
          "type": "string"
        },
        "database": {
          "default": "graphiti",
          "title": "Database",
          "type": "string"
        },
        "pool_size": {
          "default": 50,
          "title": "Pool Size",
          "type": "integer"
        }
      },
      "title": "FalkorDBConfig",
      "type": "object"
    },
    "LLMConfig": {
      "description": "LLM provider configuration",
      "properties": {
        "provider": {
          "default": "openai",
          "enum": [
            "openai",
            "azure_openai",
            "anthropic"
          ],
          "title": "Provider",
          "type": "string"
        },
        "default_model": {
          "default": "gpt-4.1-mini",
          "title": "Default Model",
          "type": "string"
        },
        "small_model": {
          "default": "gpt-4.1-nano",
          "title": "Small Model",
          "type": "string"
        },
        "temperature": {
          "default": 0.0,
          "title": "Temperature",
          "type": "number"
        },
        "semaphore_limit": {
          "default": 10,
          "title": "Semaphore Limit",
          "type": "integer"
        },
        "max_retries": {
          "default": 3,
          "title": "Max Retries",
          "type": "integer"
        },
        "timeout": {
          "default": 60,
          "title": "Timeout",
          "type": "integer"
        },
        "openai": {
          "$ref": "#/$defs/OpenAIProviderConfig"
        },
        "azure_openai": {
          "$ref": "#/$defs/AzureOpenAIProviderConfig"
        },
        "anthropic": {
          "$ref": "#/$defs/AnthropicProviderConfig"
        }
      },
      "title": "LLMConfig",
      "type": "object"
    },
    "LoggingConfig": {
      "description": "Logging configuration",
      "properties": {
        "level": {
          "default": "INFO",
          "enum": [
            "DEBUG",
            "INFO",
            "WARNING",
            "ERROR",
            "CRITICAL"
          ],
          "title": "Level",
          "type": "string"
        },
        "log_filter_decisions": {
          "default": true,
          "title": "Log Filter Decisions",
          "type": "boolean"
        },
        "log_llm_calls": {
          "default": false,
          "title": "Log Llm Calls",
          "type": "boolean"
        },
        "log_database_queries": {
          "default": false,
          "title": "Log Database Queries",
          "type": "boolean"
        },
        "log_file": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Log File"
        },
        "format": {
          "default": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
          "title": "Format",
          "type": "string"
        }
      },
      "title": "LoggingConfig",
      "type": "object"
    },
    "MCPServerConfig": {
      "description": "MCP server configuration",
      "properties": {
        "host": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Host"
        },
        "port": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Port"
        },
        "enable_cors": {
          "default": false,
          "title": "Enable Cors",
          "type": "boolean"
        },
        "allowed_origins": {
          "items": {
            "type": "string"
          },
          "title": "Allowed Origins",
          "type": "array"
        }
      },
      "title": "MCPServerConfig",
      "type": "object"
    },
    "Neo4jConfig": {
      "description": "Neo4j database configuration",
      "properties": {
        "uri": {
          "default": "bolt://localhost:7687",
          "title": "Uri",
          "type": "string"
        },
        "user": {
          "default": "neo4j",
          "title": "User",
          "type": "string"
        },
        "password_env": {
          "default": "NEO4J_PASSWORD",
          "title": "Password Env",
          "type": "string"
        },
        "database": {
          "default": "neo4j",
          "title": "Database",
          "type": "string"
        },
        "pool_size": {
          "default": 50,
          "title": "Pool Size",
          "type": "integer"
        },
        "connection_timeout": {
          "default": 30,
          "title": "Connection Timeout",
          "type": "integer"
        },
        "max_connection_lifetime": {
          "default": 3600,
          "title": "Max Connection Lifetime",
          "type": "integer"
        }
      },
      "title": "Neo4jConfig",
      "type": "object"
    },
    "OpenAIProviderConfig": {
      "description": "OpenAI provider configuration",
      "properties": {
        "api_key_env": {
          "default": "OPENAI_API_KEY",
          "title": "Api Key Env",
          "type": "string"
        },
        "base_url": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Base Url"
        },
        "organization": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Organization"
        }
      },
      "title": "OpenAIProviderConfig",
      "type": "object"
    },
    "PerformanceConfig": {
      "description": "Performance tuning configuration",
      "properties": {
        "use_parallel_runtime": {
          "default": true,
          "title": "Use Parallel Runtime",
          "type": "boolean"
        },
        "enable_caching": {
          "default": true,
          "title": "Enable Caching",
          "type": "boolean"
        },
        "cache_ttl_seconds": {
          "default": 3600,
          "title": "Cache Ttl Seconds",
          "type": "integer"
        }
      },
      "title": "PerformanceConfig",
      "type": "object"
    },
    "ProjectConfig": {
      "description": "Project-specific configuration",
      "properties": {
        "default_group_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Default Group Id"
        },
        "namespace": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Namespace"
        },
        "enable_entity_types": {
          "default": true,
          "title": "Enable Entity Types",
          "type": "boolean"
        },
        "custom_entity_types": {
          "items": {
            "type": "string"
          },
          "title": "Custom Entity Types",
          "type": "array"
        },
        "max_reflexion_iterations": {
          "default": 3,
          "title": "Max Reflexion Iterations",
          "type": "integer"
        }
      },
      "title": "ProjectConfig",
      "type": "object"
    },
    "ResilienceConfig": {
      "description": "Resilience and error recovery configuration",
      "properties": {
        "max_retries": {
          "default": 3,
          "title": "Max Retries",
          "type": "integer"
        },
        "retry_backoff_base": {
          "default": 2,
          "title": "Retry Backoff Base",
          "type": "integer"
        },
        "episode_timeout": {
          "default": 60,
          "title": "Episode Timeout",
          "type": "integer"
        },
        "health_check_interval": {
          "default": 300,
          "title": "Health Check Interval",
          "type": "integer"
        }
      },
      "title": "ResilienceConfig",
      "type": "object"
    },
    "SearchConfig": {
      "description": "Search configuration",
      "properties": {
        "default_max_nodes": {
          "default": 10,
          "title": "Default Max Nodes",
          "type": "integer"
        },
        "default_max_facts": {
          "default": 10,
          "title": "Default Max Facts",
          "type": "integer"
        },
        "default_method": {
          "default": "hybrid_rrf",
          "enum": [
            "hybrid_rrf",
            "hybrid_node_distance",
            "vector",
            "text"
          ],
          "title": "Default Method",
          "type": "string"
        },
        "vector_weight": {
          "default": 0.7,
          "title": "Vector Weight",
          "type": "number"
        },
        "text_weight": {
          "default": 0.3,
          "title": "Text Weight",
          "type": "number"
        }
      },
      "title": "SearchConfig",
      "type": "object"
    },
    "SessionTrackingConfig": {
      "description": "Session tracking configuration for automatic JSONL monitoring.\n\nConfigures the session tracking system that monitors Claude Code session files\n(JSONL format) and automatically indexes them into the Graphiti knowledge graph.",
      "properties": {
        "enabled": {
          "default": false,
          "description": "Enable or disable session tracking (opt-in model)",
          "title": "Enabled",
          "type": "boolean"
        },
        "watch_path": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Path to directory containing Claude Code session files. If None, defaults to ~/.claude/projects/. Must be an absolute path (native OS format: C:\\\\ on Windows, / on Unix).",
          "title": "Watch Path"
        },
        "inactivity_timeout": {
          "default": 300,
          "description": "Inactivity timeout in seconds before a session is considered closed. After this timeout, the session will be indexed into Graphiti.",
          "title": "Inactivity Timeout",
          "type": "integer"
        },
        "check_interval": {
          "default": 60,
          "description": "Interval in seconds to check for inactive sessions. The file watcher checks for inactive sessions at this interval.",
          "title": "Check Interval",
          "type": "integer"
        },
        "auto_summarize": {
          "default": true,
          "description": "Automatically summarize closed sessions using Graphiti's LLM. If False, sessions are stored as raw episodes without summarization.",
          "title": "Auto Summarize",
          "type": "boolean"
        },
        "store_in_graph": {
          "default": true,
          "description": "Store session summaries in the Graphiti knowledge graph. If False, sessions are logged but not persisted to Neo4j.",
          "title": "Store In Graph",
          "type": "boolean"
        },
        "keep_length_days": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": 7,
          "description": "Rolling window filter for session discovery in days. Only sessions modified within the last N days will be indexed. Set to null to index all sessions (not recommended, may cause bulk LLM costs).",
          "title": "Keep Length Days"
        },
        "filter": {
          "$ref": "#/$defs/FilterConfig"
        },
        "resilience": {
          "$ref": "#/$defs/SessionTrackingResilienceConfig"
        },
        "summarization": {
          "$ref": "#/$defs/SummarizationConfig"
        },
        "group_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Global group ID for all indexed sessions. If None, defaults to '{hostname}__global' at runtime. All sessions from all projects are indexed to this single group, enabling cross-project knowledge sharing.",
          "title": "Group Id"
        },
        "cross_project_search": {
          "default": true,
          "description": "Allow searching across all project namespaces. When True, search results include sessions from all indexed projects. When False, results are filtered to the current project namespace only.",
          "title": "Cross Project Search",
          "type": "boolean"
        },
        "trusted_namespaces": {
          "anyOf": [
            {
              "items": {
                "type": "string",
                "pattern": "^[a-fA-F0-9]+$"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "List of project namespace hashes to trust for cross-project search. If specified, only sessions from these namespaces are included in search results. Each namespace must be a valid hexadecimal hash (e.g., 'a1b2c3d4'). If None, all namespaces are trusted (when cross_project_search is True).",
          "title": "Trusted Namespaces"
        },
        "include_project_path": {
          "default": true,
          "description": "Include human-readable project path in episode metadata. When True, the full project directory path is embedded in indexed sessions. Set to False to redact paths for privacy (only namespace hash is stored).",
          "title": "Include Project Path",
          "type": "boolean"
        }
      },
      "title": "SessionTrackingConfig",
      "type": "object"
    }
  },
  "description": "Root Graphiti configuration",
  "properties": {
    "version": {
      "default": "1.0.0",
      "title": "Version",
      "type": "string"
    },
    "database": {
      "$ref": "#/$defs/DatabaseConfig"
    },
    "llm": {
      "$ref": "#/$defs/LLMConfig"
    },
    "embedder": {
      "$ref": "#/$defs/EmbedderConfig"
    },
    "project": {
      "$ref": "#/$defs/ProjectConfig"
    },
    "search": {
      "$ref": "#/$defs/SearchConfig"
    },
    "logging": {
      "$ref": "#/$defs/LoggingConfig"
    },
    "performance": {
      "$ref": "#/$defs/PerformanceConfig"
    },
    "mcp_server": {
      "$ref": "#/$defs/MCPServerConfig"
    },
    "resilience": {
      "$ref": "#/$defs/ResilienceConfig"
    },
    "session_tracking": {
      "$ref": "#/$defs/SessionTrackingConfig"
    }
  },
  "title": "GraphitiConfig",
  "type": "object"
}