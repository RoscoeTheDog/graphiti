---
description: MCP Tool Wiring for Manual Sync
---

# Feature 13.1: MCP Tool Wiring for Manual Sync

**Type**: Feature (Container)
**Status**: unassigned
**Parent**: 13
**Created**: 2025-12-04T00:30:15.538275

---

## Phase Status

| Phase | Story ID | Status | Artifact |
|-------|----------|--------|----------|
| Discovery | 13.1.d | completed | plans/13.1-plan.yaml |
| Implementation | 13.1.i | pending | Code changes |
| Testing | 13.1.t | pending | test-results/13.1-results.json |

---

## Description

Wire the existing `session_tracking_sync_history()` function from `mcp_server/manual_sync.py` into the MCP server as an exposed tool. The core logic is already implemented; this story just exposes it via `@mcp.tool()`.

---

## Acceptance Criteria

- [ ] Add `session_tracking_sync_history` tool to `mcp_server/graphiti_mcp_server.py`
- [ ] Tool parameters: `project`, `days`, `max_sessions`, `dry_run`
- [ ] Tool returns JSON response matching existing function signature
- [ ] Tool validates session_manager is initialized before calling
- [ ] Add unit test for MCP tool wrapper
- [ ] Update MCP_TOOLS.md documentation

---

## Implementation Notes

### Approach

Add `@mcp.tool()` decorated function that delegates to `manual_sync.session_tracking_sync_history()`.

### Files to Modify

- `mcp_server/graphiti_mcp_server.py` - Add tool definition
- `docs/MCP_TOOLS.md` - Document new tool
- `tests/mcp_server/test_session_tracking_tools.py` - Add tests

### Testing Requirements

- Test dry-run mode returns preview without indexing
- Test error when session_manager not initialized
- Test parameter validation

---

## 5W Completeness Check

- **Who**: Developers/users who want to index historical sessions
- **What**: MCP tool exposing manual sync functionality
- **When**: When user calls `session_tracking_sync_history` via MCP
- **Where**: `mcp_server/graphiti_mcp_server.py`
- **Why**: Core logic exists in `manual_sync.py` but isn't accessible via MCP

---

## Metadata

**Workload Score**: TBD
**Estimated Tokens**: TBD
**Dependencies**: None
**Phase Children**: 13.1.d, 13.1.i, 13.1.t
