# Plan: 5
# Generated by: discovery:5.d
# Timestamp: 2025-12-12T18:30:00Z

story_id: "5"
title: "Update CLI Tools"
created: "2025-12-12T18:30:00Z"
created_by: "discovery:5.d"

# Analysis Summary
analysis:
  summary: "Remove deprecated parameter displays from session_tracking_cli.py status command and update help text to reflect turn-based architecture"
  complexity: "low"
  estimated_files: 2
  estimated_tokens: 3000
  risk_factors:
    - "User-facing CLI output changes may require documentation updates"
    - "CLI tests may need updates to match new output format"

# Files to Create
files_to_create: []

# Files to Modify
files_to_modify:
  - path: "mcp_server/session_tracking_cli.py"
    changes:
      - "Remove inactivity_timeout, check_interval, auto_summarize from cmd_status() display (lines 174-176, 191-193)"
      - "Update status output to remove deprecated parameter display"
      - "Update help text in cmd_enable() and cmd_disable() to reflect new architecture (lines 126-127, 152)"
    lines_affected: 15

  - path: "tests/test_session_tracking_cli.py"
    changes:
      - "Update test expectations to match new status output format"
      - "Remove assertions for deprecated parameters in status display tests"
      - "Verify help text reflects new architecture"
    lines_affected: 20

# Integration Points
integration:
  - file: "mcp_server/unified_config.py"
    type: "dependency"
    description: "SessionTrackingConfig no longer contains deprecated fields (completed in Story 1)"

  - file: "graphiti.config.json"
    type: "config"
    description: "Config files no longer contain deprecated fields (cleaned in Story 1)"

# Patterns to Follow
patterns:
  - source: "mcp_server/session_tracking_cli.py"
    pattern: "Existing CLI status display pattern - maintain consistent formatting and output structure"

  - source: "tests/test_session_tracking_cli.py"
    pattern: "Existing CLI test patterns - use similar assertions and test structure"

# Test Requirements
test_requirements:
  unit:
    - "Verify cmd_status() does not display inactivity_timeout"
    - "Verify cmd_status() does not display check_interval"
    - "Verify cmd_status() does not display auto_summarize"
    - "Verify status output maintains consistent formatting"
    - "Verify help text mentions turn-based architecture"
    - "Verify enable/disable commands still work correctly"

  integration:
    - "Run CLI status command and verify output format"
    - "Test status command with config file containing deprecated params (should ignore them)"
    - "Test status command with config file without deprecated params"

  security: []

# Acceptance Criteria Mapping
acceptance_criteria:
  - id: "AC-5.1"
    text: "(P0) Remove display of inactivity_timeout, check_interval, auto_summarize in CLI status"
    implementation: "files_to_modify[0] - mcp_server/session_tracking_cli.py"
    tests: "test_requirements.unit[0-3], test_requirements.integration[0-2]"

  - id: "AC-5.2"
    text: "(P1) Update CLI help text to reflect new architecture"
    implementation: "files_to_modify[0] - mcp_server/session_tracking_cli.py"
    tests: "test_requirements.unit[4]"

  - id: "AC-5.3"
    text: "(P2) Remove any deprecated CLI commands if present"
    implementation: "files_to_modify[0] - mcp_server/session_tracking_cli.py (investigation required)"
    tests: "test_requirements.integration[0]"

# Implementation Notes
implementation_notes:
  - "Story 1 already removed deprecated fields from config schema - CLI should just stop displaying them"
  - "The cmd_status() function reads these values with .get() defaults, so removing display is safe"
  - "Config files may still contain these fields from old installations - CLI should silently ignore them"
  - "Help text should mention turn-based architecture to clarify why time-based params were removed"
  - "No new CLI commands need to be added - only remove deprecated parameter displays"
