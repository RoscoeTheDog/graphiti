---
description: CLI Command for Manual Sync
---

# Feature 13.2: CLI Command for Manual Sync

**Type**: Feature (Container)
**Status**: unassigned
**Parent**: 13
**Created**: 2025-12-04T00:30:30.637802

---

## Phase Status

| Phase | Story ID | Status | Artifact |
|-------|----------|--------|----------|
| Discovery | 13.2.d | pending | plans/13.2-plan.yaml |
| Implementation | 13.2.i | pending | Code changes |
| Testing | 13.2.t | pending | test-results/13.2-results.json |

---

## Description

Add `sync` subcommand to the `graphiti-mcp session-tracking` CLI for manual historical session indexing. Provides interactive confirmation for dangerous operations and formatted table output.

---

## Acceptance Criteria

- [ ] Add `sync` subcommand to `mcp_server/session_tracking_cli.py`
- [ ] Implement `--project <path>` flag (default: all projects)
- [ ] Implement `--days <N>` flag (default: 7)
- [ ] Implement `--max-sessions <N>` flag (default: 100)
- [ ] Implement `--dry-run` / `--no-dry-run` flags (default: dry-run)
- [ ] Implement `--confirm` flag (required for --days 0)
- [ ] Format output as table view with cost estimates
- [ ] Require confirmation for dangerous operations (--days 0)
- [ ] Add CLI tests

---

## Implementation Notes

### Approach

Add Click command that instantiates session_manager/graphiti_client and calls manual_sync functions.

### Files to Modify

- `mcp_server/session_tracking_cli.py` - Add sync command
- CLI integration requires access to session_manager and graphiti_client

### Testing Requirements

- Test --days 0 requires --confirm flag
- Test dry-run is default mode
- Test table output formatting

### Challenge

CLI runs independently of MCP server, needs access to session_manager/graphiti_client. Options:
1. Direct instantiation (duplicates MCP server logic)
2. Shared module for initialization
3. HTTP endpoint to MCP server

---

## 5W Completeness Check

- **Who**: CLI users who prefer terminal over MCP tools
- **What**: CLI command `graphiti-mcp session-tracking sync`
- **When**: When users want to sync historical sessions from terminal
- **Where**: `mcp_server/session_tracking_cli.py`
- **Why**: Provides alternative interface to MCP tool for manual sync

---

## Metadata

**Workload Score**: TBD
**Estimated Tokens**: TBD
**Dependencies**: None
**Phase Children**: 13.2.d, 13.2.i, 13.2.t
