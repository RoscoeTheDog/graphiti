# Plan: 3
# Generated by: discovery:3.d
# Timestamp: 2025-12-17T20:30:00Z

story_id: "3"
title: "Update Installation Documentation"
created: "2025-12-17T20:30:00Z"
created_by: "discovery:3.d"

# Analysis Summary
analysis:
  summary: "Update installation documentation to reflect simplified daemon setup flow where daemon auto-enables after install, removing manual config editing step and adding troubleshooting guidance."
  complexity: "low"
  estimated_files: 3
  estimated_tokens: 8000
  risk_factors:
    - "Documentation accuracy depends on Story 1 implementation being correct"
    - "Multiple documentation files need to stay synchronized"

# Files to Create
files_to_create: []

# Files to Modify
files_to_modify:
  - path: "claude-mcp-installer/instance/CLAUDE_INSTALL.md"
    changes:
      - "Simplify daemon setup section to single command (remove edit config step)"
      - "Update Daemon Configuration section to show auto-enable behavior"
      - "Add troubleshooting section for common connection issues"
      - "Update before/after examples showing no manual config edit needed"
      - "Update Phase 3 (Configure MCP Server) to reflect auto-enable"
      - "Update troubleshooting section with daemon auto-enable context"
    lines_affected: 150

  - path: ".claude/implementation/DAEMON_ARCHITECTURE_SPEC_v1.0.md"
    changes:
      - "Update default configuration section to show daemon.enabled: true after install"
      - "Update user workflow section to remove manual enable step"
      - "Add note about breaking change from previous behavior (manual enable required)"
      - "Update installation flow diagram to reflect auto-enable"
    lines_affected: 80

  - path: "README.md"
    changes:
      - "Update daemon setup quick start (if present) to show single-command flow"
      - "Remove reference to manual config editing for daemon enable (if present)"
      - "Update verification steps to expect daemon running immediately"
    lines_affected: 30

# Integration Points
integration:
  - file: "mcp_server/daemon/manager.py"
    type: "reference"
    description: "Documentation must accurately reflect the install() method behavior from Story 1"

# Patterns to Follow
patterns:
  - source: "claude-mcp-installer/instance/CLAUDE_INSTALL.md"
    pattern: "Multi-step installation guide with platform-specific sections, before/after examples, and comprehensive troubleshooting"

  - source: ".claude/implementation/DAEMON_ARCHITECTURE_SPEC_v1.0.md"
    pattern: "Technical specification with architecture diagrams, configuration schemas, and state transition flows"

# Test Requirements
test_requirements:
  unit: []
  integration:
    - "Verify CLAUDE_INSTALL.md daemon setup instructions are accurate (manual test)"
    - "Verify before/after examples match actual daemon behavior"
    - "Verify troubleshooting section addresses common user issues"
  security: []

# Acceptance Criteria Mapping
acceptance_criteria:
  - id: "AC-3.1"
    text: "(P0) CLAUDE_INSTALL.md updated to show single-command daemon setup"
    implementation: "files_to_modify[0] (CLAUDE_INSTALL.md sections: Daemon Configuration, MCP Server Integration)"
    tests: "integration[0-2] (manual verification of accuracy)"

  - id: "AC-3.2"
    text: "(P1) Remove manual 'edit config to enable' instructions"
    implementation: "files_to_modify[0] (CLAUDE_INSTALL.md - Phase 3, Daemon Configuration sections)"
    tests: "integration[1] (verify no outdated instructions remain)"

  - id: "AC-3.3"
    text: "(P1) Add troubleshooting section for common connection issues"
    implementation: "files_to_modify[0] (CLAUDE_INSTALL.md - new troubleshooting subsection)"
    tests: "integration[2] (verify troubleshooting covers common issues)"

  - id: "AC-3.4"
    text: "(P2) Update DAEMON_ARCHITECTURE_SPEC_v1.0.md to reflect auto-enable default"
    implementation: "files_to_modify[1] (DAEMON_ARCHITECTURE_SPEC_v1.0.md - default config, workflows)"
    tests: "integration[0] (verify spec matches implementation)"

# Documentation-Specific Details
documentation_updates:
  CLAUDE_INSTALL.md:
    sections_to_update:
      - name: "Daemon Configuration"
        line_range: "881-1013"
        changes:
          - "Update installation instructions to show auto-enable"
          - "Remove manual config edit step"
          - "Update 'Starting the Daemon' section to reflect auto-start"

      - name: "MCP Server Integration - Phase 3"
        line_range: "373-481"
        changes:
          - "Update HTTP transport setup to show daemon auto-enabled"
          - "Add note that daemon is already running after install"

      - name: "Troubleshooting Daemon"
        line_range: "1014-1076"
        changes:
          - "Add 'Daemon not starting after install' troubleshooting"
          - "Add 'Connection refused immediately after install' troubleshooting"
          - "Add 'How to verify daemon auto-enabled correctly' steps"

    before_after_examples:
      - location: "Line 42-54 (Implementation Notes)"
        before: |
          1. Run: graphiti-mcp daemon install
          2. Edit config: Set daemon.enabled: true
          3. Wait 5 seconds for server to start
        after: |
          1. Run: graphiti-mcp daemon install
             (Server starts automatically)

  DAEMON_ARCHITECTURE_SPEC_v1.0.md:
    sections_to_update:
      - name: "Default Configuration"
        line_range: "~200-250"
        changes:
          - "Update daemon.enabled default to true (after install)"
          - "Add migration note about behavior change"

      - name: "Installation"
        line_range: "~900-1000"
        changes:
          - "Update flow to show auto-enable on install"
          - "Remove manual config edit step from installation workflow"

# Verification Checklist
verification:
  - "All acceptance criteria mapped to implementation changes"
  - "Pattern sources identified for documentation style"
  - "Line ranges estimated for files to modify"
  - "Before/after examples prepared for key sections"
  - "Troubleshooting section content outlined"
