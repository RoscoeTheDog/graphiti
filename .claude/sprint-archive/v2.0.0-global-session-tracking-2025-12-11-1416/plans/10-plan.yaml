# Plan: 10
# Generated by: discovery:10.d
# Timestamp: 2025-12-10T00:00:00Z

story_id: "10"
title: "Documentation Updates"
created: "2025-12-10T00:00:00Z"
created_by: "discovery:10.d"

# Analysis Summary
analysis:
  summary: "Update user-facing documentation to document v2.0 global scope changes including new configuration fields (group_id, cross_project_search, trusted_namespaces, include_project_path), cross-project knowledge sharing behavior, and security considerations."
  complexity: "medium"
  estimated_files: 3
  estimated_tokens: 15000
  risk_factors:
    - "Documentation must accurately reflect implemented code behavior"
    - "Migration guidance must address v1.0 (never released) to v2.0 transition"
    - "Security documentation must cover all edge cases for cross-project information leakage"

# Files to Create
files_to_create: []
# No new files needed - all documentation updates are modifications to existing files

# Files to Modify
files_to_modify:
  - path: "CONFIGURATION.md"
    changes:
      - "Add new Global Scope Settings subsection under Session Tracking Configuration"
      - "Add group_id field documentation (string|null, default null -> {hostname}__global)"
      - "Add cross_project_search field documentation (bool, default true)"
      - "Add trusted_namespaces field documentation (string[]|null, default null)"
      - "Add include_project_path field documentation (bool, default true)"
      - "Add configuration examples showing global scope use cases"
      - "Update version number reference"
    lines_affected: 80
    section_target: "## Session Tracking Configuration"

  - path: "docs/SESSION_TRACKING_USER_GUIDE.md"
    changes:
      - "Add new section: Global Knowledge Graph Concept"
      - "Explain namespace metadata and how it works"
      - "Explain how agents interpret provenance information"
      - "Add guidance on when to use cross_project_search: false"
      - "Add guidance on when to use trusted_namespaces"
      - "Update Group IDs section to explain global vs project-scoped"
      - "Update FAQ with cross-project search questions"
    lines_affected: 120
    section_target: "After ## How It Works section"

  - path: "docs/SESSION_TRACKING_MIGRATION.md"
    changes:
      - "Add v1.1.0 -> v2.0.0 migration section"
      - "Explain global scope architectural change"
      - "Document that v1.0 data in old group_ids won't be searched by default"
      - "Provide options: keep old data, re-index, or manual migration"
      - "Note that v1.0 was never publicly released (simplifies migration)"
      - "Update version references throughout"
    lines_affected: 100
    section_target: "After existing migration paths"

# Integration Points
integration:
  - file: "docs/README.md"
    type: "reference"
    description: "May need to add cross-reference to global scope documentation"
  - file: "CLAUDE.md"
    type: "reference"
    description: "Project instructions reference SESSION_TRACKING_USER_GUIDE.md for user documentation"

# Patterns to Follow
patterns:
  - source: "CONFIGURATION.md"
    pattern: "Use existing table format for configuration fields (Field | Type | Default | Description)"
  - source: "docs/SESSION_TRACKING_USER_GUIDE.md"
    pattern: "Use existing section structure with Overview, explanation, code examples, and FAQ format"
  - source: "docs/SESSION_TRACKING_MIGRATION.md"
    pattern: "Use existing migration path format with Before/After JSON examples, estimated time, and cost impact"

# Test Requirements
test_requirements:
  unit:
    - "Verify CONFIGURATION.md contains all new session_tracking fields"
    - "Verify docs/SESSION_TRACKING_USER_GUIDE.md explains global scope behavior"
    - "Verify docs/SESSION_TRACKING_MIGRATION.md covers v2.0 migration"
  integration:
    - "Validate all documentation cross-references are valid"
    - "Validate JSON examples in documentation are syntactically correct"
    - "Validate configuration field defaults match code in unified_config.py"
  security:
    - "Verify security considerations section covers path exposure risks"
    - "Verify security considerations section covers cross-project information leakage"
    - "Verify security considerations section covers trusted_namespaces usage"

# Acceptance Criteria Mapping
acceptance_criteria:
  - id: "AC-10.1"
    text: "(P0) CONFIGURATION.md updated with new session_tracking fields"
    priority: "P0"
    implementation: "files_to_modify[0] - CONFIGURATION.md"
    tests: "test_requirements.unit[0], test_requirements.integration[2]"

  - id: "AC-10.2"
    text: "(P1) docs/SESSION_TRACKING_USER_GUIDE.md updated with global scope explanation"
    priority: "P1"
    implementation: "files_to_modify[1] - docs/SESSION_TRACKING_USER_GUIDE.md"
    tests: "test_requirements.unit[1], test_requirements.integration[0]"

  - id: "AC-10.3"
    text: "(P1) Migration notes for test users documented"
    priority: "P1"
    implementation: "files_to_modify[2] - docs/SESSION_TRACKING_MIGRATION.md"
    tests: "test_requirements.unit[2], test_requirements.integration[1]"

  - id: "AC-10.4"
    text: "(P1) Security considerations documented (path exposure, cross-project info)"
    priority: "P1"
    implementation: "files_to_modify[1] - docs/SESSION_TRACKING_USER_GUIDE.md (Privacy & Security section)"
    tests: "test_requirements.security[0], test_requirements.security[1], test_requirements.security[2]"

  - id: "AC-10.5"
    text: "(P2) Example configs showing common use cases"
    priority: "P2"
    implementation: "files_to_modify[0] - CONFIGURATION.md (Examples section)"
    tests: "test_requirements.integration[1]"

# Reference Documents
reference_documents:
  - path: ".claude/implementation/GLOBAL_SESSION_TRACKING_SPEC_v2.0.md"
    sections:
      - "Section 3: Configuration Schema"
      - "Section 7: Migration Guide"
      - "Section 8: Security Considerations"
      - "Appendix A: Configuration Quick Reference"

# Implementation Notes
implementation_notes:
  - "All documentation must reference GLOBAL_SESSION_TRACKING_SPEC_v2.0.md as source of truth"
  - "Use YAML frontmatter format for episode metadata examples as specified in Section 4.1"
  - "Ensure backward compatibility messaging - v1.0 was never publicly released"
  - "Group ID format: {hostname}__global (double underscore)"
  - "Namespace format: 8-character hex hash (first 8 chars of SHA256)"
